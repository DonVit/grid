<!doctype html>
<head><meta charset="utf-8" /></head>
<body>
<h2>stacked grid example</h2>
<button id="randomize-data">Randomize data</button>
<p id="data-count"></p>
<div class="grid-target"></div>
<link rel="stylesheet" type="text/css" href="../node_modules/normalize.css/normalize.css">
<script src="../node_modules/underscore/underscore.js"></script>
<script src="../node_modules/faker/faker.js"></script>
<script src="../node_modules/@zambezi/fun/dist/fun.js"></script>
<script src="../node_modules/d3/build/d3.js"></script>
<script src="../node_modules/@zambezi/d3-utils/dist/d3-utils.js"></script>
<script src="../dist/grid.js"></script>
<script>
  const table = grid.createStackedGrid()
    .columns(
      [
        {
          components: [
            grid.createNestedRowExpanders()
          ]
          , key: 'label'
          , label: 'expanders'
          , width: 100
          , resizable: false
          , draggable: false
        }
        , { key: 'label', sortDescending: true }
        , { key: 'nestLevel', width: 70, sortable: false }
      ]
    )
      , target = d3.select('.grid-target').style('height', '202px')
      , count = d3.select('#data-count')

  d3.select('#randomize-data')
        .on('click', draw)

  draw()

  function draw() {
    const dataCount = _.random(3000, 6000)
      , rows = [
      { label: 'A' }
      , {
        label: 'B'
        , expanded: true
        , children: [
          { label: 'B0' }
          , { label: 'B1' }
          , {
            label: 'B2'     // not expanded, therfore not shown.
            , children: [
              { label: 'B2a' }
              , { label: 'B2b' }
              , {
                label: 'B2c'
                , children: [
                  { label: 'B2c0' }
                  , {
                    label: 'B2c1'
                    , children: [
                      { label: 'B2c1A' }
                      , { label: 'B2c1B' }
                      , { label: 'B2c1C' }
                      , { label: 'B2c1D' }
                    ]
                  }
                  , { label: 'B2c2' }
                  , { label: 'B2c3' }
                ]
              }
              , { label: 'B2d' }
            ]
          }
          , {
            label: 'B3'
            , expanded: true
            , children: [
              { label: 'B3a' }
              , { label: 'B3b' }
              , { label: 'B3c' }
              , { label: 'B3d' }
            ]
          }
        ]
      }
      , { label: 'C' }
      , { label: 'D' }
    ]
    target.datum(rows).call(table)
    count.text(`There are ${dataCount} rows`)
  }
</script>
</body>
